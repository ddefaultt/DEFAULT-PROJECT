<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¯Ø®ÙˆÙ„</title>
</head>
<body>

<h1>ğŸ” ÙƒÙˆØ¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</h1>
<div id="code" style="font-size:30px;font-weight:bold;margin-bottom:10px;"></div>
<p>Ø£Ø±Ø³Ù„ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ø¥Ù„Ù‰ TEAM X NINJA Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.</p>

<script>
// 1ï¸âƒ£ Ø¬Ù„Ø¨ Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† LocalStorage (Ø«Ø§Ø¨Øª)
let myCode = localStorage.getItem("my_fixed_code");

// 2ï¸âƒ£ Ø¥Ø°Ø§ Ù…Ø§ÙƒØ§Ù†Ø´ â†’ Ù†ÙˆÙ„Ù‘Ø¯Ùˆ ÙˆØ§Ø­Ø¯ Ø¬Ø¯ÙŠØ¯
if (!myCode) {
    myCode = Math.floor(100000 + Math.random() * 900000).toString();
    localStorage.setItem("my_fixed_code", myCode);
}

// 3ï¸âƒ£ Ù†Ø¹Ø±Ø¶Ùˆ Ø§Ù„ÙƒÙˆØ¯ Ù„Ù„Ø´Ø®Øµ
document.getElementById("code").innerText = myCode;

// 4ï¸âƒ£ Ù†ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ù…ÙØ¹Ù‘Ù„ ÙÙŠ Ù…Ù„Ù codes.json
async function checkAccess() {
    try {
        const res = await fetch("codes.json?nocache=" + Date.now());
        const list = await res.json();

        // Ø¥Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ù…ÙˆØ¬ÙˆØ¯ â†’ Ø¯Ø®ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ
        if (list.includes(myCode)) {
            localStorage.setItem("access_granted", "yes");
            window.location.href = "main.html";
        }
    } catch (e) {
        console.error("Error loading codes.json");
    }
}

// Ù†ØªØ­Ù‚Ù‚ ÙƒÙ„ Ø«Ø§Ù†ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
setInterval(checkAccess, 1000);
</script>

</body>
</html>
